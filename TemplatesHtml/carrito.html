{% extends "base.html" %}
{% load static %}
{% block title %}Carrito{% endblock %}

{% block content %}
{% csrf_token %}
<div class="container py-4">
  <div class="row g-4">
    <!-- Col izquierda: items -->
    <div class="col-12 col-lg-8">
      <h4 class="mb-3">Carro <span class="text-muted fs-6" id="cart-count">(0 productos)</span></h4>

      <div class="card border-0 shadow-sm">
        <div class="card-body p-0">
          <div class="d-flex align-items-center gap-2 px-3 py-2 border-bottom">
            <input type="checkbox" id="select-all" class="form-check-input">
            <label for="select-all" class="form-check-label">Seleccionar todos</label>
          </div>

          <div id="cart-items">
            <!-- aquÃ­ JS va a pintar los productos -->
          </div>
        </div>
      </div>
    </div>

    <!-- Col derecha: resumen -->
    <div class="col-12 col-lg-4">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title mb-3">Resumen de la compra</h5>
          <div class="d-flex justify-content-between mb-2">
            <span>Productos (<span id="summary-count">0</span>)</span>
            <strong id="summary-subtotal">$0</strong>
          </div>
          <div class="d-flex justify-content-between mb-3 border-bottom pb-2">
            <span>EnvÃ­o</span>
            <span class="text-success">Gratis</span>
          </div>
          <div class="d-flex justify-content-between mb-4">
            <span class="fw-semibold">Total:</span>
            <span class="fw-bold fs-5" id="summary-total">$0</span>
          </div>
          <button id="btn-checkout" class="btn btn-dark w-100 rounded-pill">
            Continuar compra
          </button>
        </div>
      </div>

      <!-- Mensaje de upsell opcional -->
      <div class="alert alert-success mt-3 d-flex justify-content-between align-items-center">
        <span>ðŸ’¡ Â¡Agrega calcetines por $4.990!</span>
        <button class="btn btn-sm btn-outline-success">Ver</button>
      </div>
    </div>
  </div>
</div>

<!-- Template oculto para item -->
<script type="text/template" id="cart-item-template">
  <div class="d-flex gap-3 px-3 py-3 border-bottom cart-item align-items-center">
    <input type="checkbox" class="form-check-input mt-0 cart-item-check">
    <img src="__IMG__" alt="zapato" class="rounded" style="width:70px; height:70px; object-fit:cover;">
    <div class="flex-grow-1">
      <h6 class="mb-1">__NAME__</h6>
      <p class="text-muted small mb-1">__DESC__</p>
      <p class="text-muted small mb-0">Talla: __SIZE__</p>
    </div>
    <div class="text-end me-3">
      <p class="fw-semibold mb-2">$ __PRICE__</p>
      <div class="d-flex align-items-center justify-content-end gap-2">
        <button class="btn btn-sm btn-outline-secondary btn-qty" data-dir="-">âˆ’</button>
        <span class="fw-semibold cart-item-qty">__QTY__</span>
        <button class="btn btn-sm btn-outline-secondary btn-qty" data-dir="+">+</button>
      </div>
      <button class="btn btn-link text-danger btn-sm mt-1 p-0 btn-remove">Eliminar</button>
    </div>
  </div>
</script>
{% endblock %}
{% block extra_js %}
  <script src="{% static 'JavaScript/carrito_pagina.js' %}"></script>
{% endblock %}

